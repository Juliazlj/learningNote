---
title: IP/UDP/TCP
date: 2019-11-05
sidebar: 'auto'
categories:
 - 前端
tags:
 - 浏览器
publish: true
---
# IP/UDP/TCP

## 七层网络协议 现代浏览器是五层

物数网传(会表应)

## IP 网际协议（Internet Protocol）

+ ip地址可以找到主机地址
+ 把数据包通过网络层加上ip头传输到另一台主机

## UDP用户数据包协议（User Datagram Protocol）

+ 传输层
+ IP 通过 IP 地址信息把数据包发送给指定的电脑，而 UDP 通过端口号把数据包分发给正确的程序
+ 不提供重发机制，只是丢弃当前的包
+ 无法知道是否能达到目的地。

## TCP传输控制协议（Transmission Control Protocol）

+ 传输层
+ 面向连接的、可靠的、基于字节流的传输层通信协议
+ 重传机制
+ 数据包排序机制，用来保证把乱序的数据包组合成一个完整的文件
+ 保证数据传输的可靠性，牺牲了数据包的传输速度，因为“三次握手”和“数据包校验机制”等把传输过程中的数据包的数量提高了一倍


### Q&A

+ TCP 是如何保证重传机制和数据包的排序功能的。
  + <strong>首先，建立连接阶段</strong>。这个阶段是通过“三次握手”来建立客户端和服务器之间的连接。TCP 提供面向连接的通信传输。<strong>面向连接</strong>是指在数据通信开始之前先做好两端之间的准备工作。所谓<strong>三次握手</strong>，是指在建立一个 TCP 连接时，客户端和服务器总共要发送三个数据包以确认连接的建立。
  + <strong>其次，传输数据阶段</strong>。在该阶段，<strong>接收端需要对每个数据包进行确认操作</strong>，也就是接收端在接收到数据包之后，需要发送确认数据包给发送端。所以当发送端发送了一个数据包之后，在规定时间内没有接收到接收端反馈的确认消息，则判断为数据包丢失，并触发发送端的重发机制。同样，一个大的文件在传输过程中会被拆分成很多小的数据包，这些数据包到达接收端后，接收端会按照 **TCP 头中的序号为其排序**，从而保证组成完整的数据。
  + <strong>最后，断开连接阶段</strong>。数据传输完毕之后，就要终止连接了，涉及到最后一个阶段“四次挥手”来保证双方都能断开连接。
+ 怎么理解 HTTP 和 TCP 的关系
  + HTTP协议和TCP协议都是TCP/IP协议簇的子集。
  + HTTP协议属于**应用层**，TCP协议属于传输层，HTTP协议位于TCP协议的上层。
  + 请求方要发送的数据包，在应用层加上HTTP头以后会交给传输层的TCP协议处理，应答方接收到的数据包，在传输层拆掉TCP头以后交给应用层的HTTP协议处理。建立 TCP 连接后会顺序收发数据，请求方和应答方都必须依据 HTTP 规范构建和解析HTTP报文。
